<html><head><link rel="stylesheet" href="index.a9e730ff.css"></head><body> <div id="kdtree"></div> <div id="binarytree"></div> <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/tinycolor/1.4.1/tinycolor.min.js"></script> <script src="index.8bf964aa.js"></script> <script>var data,bTree,colorSubset=[],tree=new kdTree(colorSubset,colorDistance,["red","green"]);function colorDistance(t,e){var n=t.red-e.red,r=t.green-e.green,o=t.blue-e.blue,a=(t.red+e.red)/2;return(2+a/256)*n*n+4*r*r+(2+(255-a)/256)*o*o}$((function(){var t=0,e=0,n=0,r=0,o=470-r-e,a=o-t-n,i=d3.scale.linear().range([0,o]).domain([0,255]),d=d3.scale.linear().range([a,0]).domain([0,255]),s=d3.select("#kdtree").append("svg").attr("class","kdtree").attr("width",o+r+e).attr("height",a+t+n),u=s.append("g").attr("transform","translate("+r+","+t+")").attr("width",o).attr("height",a),c=u.append("g").attr("class","lines"),f=u.append("g").attr("class","points");bTree=d3.layout.tree().size([a,o]);d3.svg.diagonal().projection((function(t){return[t.y,t.x]}));var l=d3.select("#binarytree").append("svg").attr("class","binarytree").attr("width",o+r+e).attr("height",a+t+n),p=l.append("g").attr("class","lines"),b=l.append("g").attr("class","points");s.on("click",(function(){coordinates=d3.mouse(this);var t=i.invert(coordinates[0]),e=d.invert(coordinates[1]),n={title:"user defined",hex:d3.rgb(t,e,128).toString()};!function(t){var e=new tinycolor(t.hex).toRgb();t.red=e.r,t.green=e.g,t.blue=e.b}(n);var r=tree.nearest(n,1);if(r.length>0&&r[0][1]<10)return;colorSubset.push(n),tree.insert(n),y(data=tree.pointsBFS())})),y(data=tree.pointsBFS());function y(t){var e=f.selectAll(".point").data(t,(function(t){return t.hex+"point"}));e.enter().append("circle").attr("class",(function(t){return t.fresh=!0,"point"})).attr("class","point").attr("dimension",(function(t){return t.dimension})).attr("r",6).attr("cx",(function(t){return i(t.red)})).attr("cy",(function(t){return d(t.green)})).style("fill",(function(t){return d3.rgb(t.hex)})).style("stroke",(function(t){return d3.rgb(t.hex)})).on("mouseover",(function(t){if(!t.fresh){for(var e=t.node;e;)e.onAccessPath=!0,e=e.parent;y(data)}})).on("mouseout",(function(t){if(t.fresh)t.fresh=!1;else{for(var e=t.node;e;)e.onAccessPath=!1,e=e.parent;y(data)}})),e.style("stroke-width",(function(t){return t.node.onAccessPath||t.node.isSearchResult?2:0})),(n=c.selectAll(".point-line").data(t,(function(t){return t.hex+"line"}))).style("stroke-width",(function(t){return t.node.onAccessPath?2*a/400:a/400})).transition().attr("x1",(function(t){return i(t.x1)})).attr("y1",(function(t){return d(t.y1)})).attr("x2",(function(t){return i(t.x2)})).attr("y2",(function(t){return d(t.y2)})).attr("stroke",(function(t){switch(t.dimension){case 0:return d3.rgb(t.red,0,0);case 1:return d3.rgb(0,t.green,0)}})),n.enter().append("line").attr("class","point-line").attr("stroke-width",a/400).attr("x1",(function(t){return i(t.red)})).attr("y1",(function(t){return d(t.green)})).attr("x2",(function(t){return i(t.red)})).attr("y2",(function(t){return d(t.green)})).attr("stroke",(function(t){switch(t.dimension){case 0:return d3.rgb(t.red,0,0);case 1:return d3.rgb(0,t.green,0)}})).transition().attr("x1",(function(t){return i(t.x1)})).attr("y1",(function(t){return d(t.y1)})).attr("x2",(function(t){return i(t.x2)})).attr("y2",(function(t){return d(t.y2)})),n.exit().remove();var n,r=d3.max(t,(function(t){return t.depth})),s=b.selectAll(".binarytreepoint").data(t,(function(t){return t.hex+"binarytreepoint"}));s.enter().append("circle").attr("class","binarytreepoint").attr("dimension",(function(t){return t.dimension})).attr("r",6).style("fill",(function(t){return d3.rgb(t.hex)})).style("stroke",(function(t){return d3.rgb(t.hex)})),s.style("stroke-width",(function(t){return t.node.onAccessPath?2:0})).transition().attr("cx",(function(t){if(t.node.parent){var e=(o-24)/Math.pow(2,t.depth+1);t.node==t.node.parent.left?t.node.bx=t.node.parent.bx-e:t.node.bx=t.node.parent.bx+e}else t.node.bx=o/2;return t.node.bx})).attr("cy",(function(t){return t.node.by=t.depth*((a-24)/r)+12,t.node.by})).style("fill",(function(t){return d3.rgb(t.hex)})),s.exit().remove(),(n=p.selectAll(".binarytreepoint-edge").data(t,(function(t){return t.hex+"binarytreepoint-edge"}))).style("stroke-width",(function(t){return t.node.onAccessPath?2*a/400:a/400})).transition().attr("x1",(function(t){return t.node.parent?t.node.parent.bx:t.node.bx})).attr("y1",(function(t){return t.node.parent?t.node.parent.by:t.node.by})).attr("x2",(function(t){return t.node.bx})).attr("y2",(function(t){return t.node.by})).attr("stroke",(function(t){switch(t.dimension){case 0:return d3.rgb(t.red,0,0);case 1:return d3.rgb(0,t.green,0)}})),n.enter().append("line").attr("class","binarytreepoint-edge").attr("stroke-dasharray","1,3").attr("stroke-width",a/400).style("opacity",.8).attr("x1",(function(t){return t.node.parent?t.node.parent.bx:t.node.bx})).attr("y1",(function(t){return t.node.parent?t.node.parent.by:t.node.by})).attr("x2",(function(t){return t.node.parent?t.node.parent.bx:t.node.bx})).attr("y2",(function(t){return t.node.parent?t.node.parent.by:t.node.by})).attr("stroke",(function(t){switch(t.dimension){case 0:return d3.rgb(t.red,0,0);case 1:return d3.rgb(0,t.green,0)}})).transition().attr("x1",(function(t){return t.node.parent?t.node.parent.bx:t.node.bx})).attr("y1",(function(t){return t.node.parent?t.node.parent.by:t.node.by})).attr("x2",(function(t){return t.node.bx})).attr("y2",(function(t){return t.node.by})),n.exit().remove()}}));</script> </body></html>