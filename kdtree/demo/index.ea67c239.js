!function(t,n){"function"==typeof define&&define.amd?define(["exports"],n):"object"==typeof exports?n(exports):n(t.commonJsStrict={})}(this,(function(t){function n(t,n,e){this.obj=t,this.left=null,this.right=null,this.parent=e,this.dimension=n}function e(t,e,i){var r,l=this;Array.isArray(t)?this.root=function t(e,o,r){var l,h,u=o%i.length;return 0===e.length?null:1===e.length?new n(e[0],u,r):(e.sort((function(t,n){return t[i[u]]-n[i[u]]})),(h=new n(e[l=Math.floor(e.length/2)],u,r)).left=t(e.slice(0,l),o+1,h),h.right=t(e.slice(l+1),o+1,h),h)}(t,0,null):(r=t,l.root=r,function t(n){n.left&&(n.left.parent=n,t(n.left)),n.right&&(n.right.parent=n,t(n.right))}(l.root)),this.toJSON=function(t){t||(t=this.root);var e=new n(t.obj,t.dimension,null);return t.left&&(e.left=l.toJSON(t.left)),t.right&&(e.right=l.toJSON(t.right)),e},this.insert=function(t){var e,o,r=function n(e,o){if(null===e)return o;var r=i[e.dimension];return t[r]<e.obj[r]?n(e.left,e):n(e.right,e)}(this.root,null);null!==r?(e=new n(t,(r.dimension+1)%i.length,r),o=i[r.dimension],t[o]<r.obj[o]?r.left=e:r.right=e):this.root=new n(t,0,null)},this.remove=function(t){var n;n=function n(e){if(null===e)return null;if(e.obj===t)return e;var o=i[e.dimension];return t[o]<e.obj[o]?n(e.left):n(e.right)}(l.root),null!==n&&function t(n){var e,o,r;function h(t,n){var e,o,r,l,u;return null===t?null:(e=i[n],t.dimension===n?null!==t.left?h(t.left,n):t:(o=t.obj[e],r=h(t.left,n),l=h(t.right,n),u=t,null!==r&&r.obj[e]<o&&(u=r),null!==l&&l.obj[e]<u.obj[e]&&(u=l),u))}if(null===n.left&&null===n.right)return null===n.parent?void(l.root=null):(r=i[n.parent.dimension],void(n.obj[r]<n.parent.obj[r]?n.parent.left=null:n.parent.right=null));null!==n.right?(o=(e=h(n.right,n.dimension)).obj,t(e),n.obj=o):(o=(e=h(n.left,n.dimension)).obj,t(e),n.right=n.left,n.left=null,n.obj=o)}(n)},this.nearest=function(t,n,r){var h,u,s;if(s=new o((function(t){return-t[1]})),r)for(h=0;h<n;h+=1)s.push([null,r]);for(l.root&&function o(r){var l,h,u,f,c=i[r.dimension],a=e(t,r.obj),p={};function g(t,e){s.push([t,e]),s.size()>n&&s.pop()}for(f=0;f<i.length;f+=1)f===r.dimension?p[i[f]]=t[i[f]]:p[i[f]]=r.obj[i[f]];h=e(p,r.obj),null!==r.right||null!==r.left?(o(l=null===r.right?r.left:null===r.left?r.right:t[c]<r.obj[c]?r.left:r.right),(s.size()<n||a<s.peek()[1])&&g(r,a),(s.size()<n||Math.abs(h)<s.peek()[1])&&null!==(u=l===r.left?r.right:r.left)&&o(u)):(s.size()<n||a<s.peek()[1])&&g(r,a)}(l.root),u=[],h=0;h<Math.min(n,s.content.length);h+=1)s.content[h][0]&&u.push([s.content[h][0].obj,s.content[h][1]]);return u},this.pointsBFS=function(){var t=[];if(!this.root)return t;var n=[],e={x1:0,y1:0,x2:255,y2:255},o={node:this.root,bounds:e,depth:0};for(n.push(o);n.length>0;){var i,r,l=(o=n.shift()).node,h=(e=o.bounds,o.depth),u=l.obj;switch(u.dimension=l.dimension,u.depth=h,l.children=[l.left,l.right],u.node=l,u.dimension){case 0:u.x1=u.x2=u.red,u.y1=e.y1,u.y2=e.y2,i={x1:e.x1,y1:e.y1,x2:u.x2,y2:e.y2},r={x1:u.x1,y1:e.y1,x2:e.x2,y2:e.y2};break;case 1:u.y1=u.y2=u.green,u.x1=e.x1,u.x2=e.x2,i={x1:e.x1,y1:e.y1,x2:e.x2,y2:u.y2},r={x1:e.x1,y1:u.y1,x2:e.x2,y2:e.y2}}t.push(u),l.left&&n.push({node:l.left,bounds:i,depth:h+1}),l.right&&n.push({node:l.right,bounds:r,depth:h+1})}return t},this.d3tree=function(){return function t(n){if(!n)return"null";var e={};return e.name=n.obj.toString(),n.parent?e.parent=n.parent.obj.toString():e.parent="null",e.children=[t(n.left),t(n.right)],e}(this.root)},this.balanceFactor=function(){return function t(n){return null===n?0:Math.max(t(n.left),t(n.right))+1}(l.root)/(Math.log(function t(n){return null===n?0:t(n.left)+t(n.right)+1}(l.root))/Math.log(2))}}function o(t){this.content=[],this.scoreFunction=t}o.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var n=this.content.length,e=0;e<n;e++)if(this.content[e]==t){var o=this.content.pop();return void(e!=n-1&&(this.content[e]=o,this.scoreFunction(o)<this.scoreFunction(t)?this.bubbleUp(e):this.sinkDown(e)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var n=this.content[t];t>0;){var e=Math.floor((t+1)/2)-1,o=this.content[e];if(!(this.scoreFunction(n)<this.scoreFunction(o)))break;this.content[e]=n,this.content[t]=o,t=e}},sinkDown:function(t){for(var n=this.content.length,e=this.content[t],o=this.scoreFunction(e);;){var i=2*(t+1),r=i-1,l=null;if(r<n){var h=this.content[r],u=this.scoreFunction(h);u<o&&(l=r)}if(i<n){var s=this.content[i];this.scoreFunction(s)<(null==l?o:u)&&(l=i)}if(null==l)break;this.content[t]=this.content[l],this.content[l]=e,t=l}}},this.kdTree=e,t.kdTree=e,t.BinaryHeap=o}));
//# sourceMappingURL=index.ea67c239.js.map
