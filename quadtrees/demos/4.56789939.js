var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},e={},o=t.parcelRequirefde0;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in e){var o=e[t];delete e[t];var i={id:t,exports:{}};return n[t]=i,o.call(i.exports,i,i.exports),i.exports}var d=new Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(t,n){e[t]=n},t.parcelRequirefde0=o);var i,d=o("h36xl");function r(t,n,e=4){return!!a(t.boundary,n)&&(t.points.length<e&&!t.topLeftChild?(t.points.push(n),!0):(t.topLeftChild||function(t,n){const{x1:e,x2:o,y1:i,y2:d}=t.boundary,a=(e+o)/2,l=(i+d)/2;t.topLeftChild=c({x1:e,y1:i,x2:a,y2:l}),t.bottomLeftChild=c({x1:e,y1:l,x2:a,y2:d}),t.topRightChild=c({x1:a,y1:i,x2:o,y2:l}),t.bottomRightChild=c({x1:a,y1:l,x2:o,y2:d}),t.points.forEach((e=>{r(t.topLeftChild,e,n)||r(t.bottomLeftChild,e,n)||r(t.topRightChild,e,n)||r(t.bottomRightChild,e,n)})),t.points=[]}(t,e),!!r(t.topLeftChild,n,e)||(!!r(t.bottomLeftChild,n,e)||(!!r(t.topRightChild,n,e)||!!r(t.bottomRightChild,n,e)))))}function a(t,n){return n.x>=t.x1&&n.x<=t.x2&&n.y>=t.y1&&n.y<=t.y2}function l(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function c(t){return{boundary:t,points:[]}}i={insert:r,search:function t(n,e){return o=n.boundary,i=e,o.x1<=i.x2&&o.x2>=i.x1&&o.y1<=i.y2&&o.y2>=i.y1?n.topLeftChild?t(n.topLeftChild,e).concat(t(n.bottomLeftChild,e)).concat(t(n.topRightChild,e)).concat(t(n.bottomRightChild,e)):n.points.filter((t=>a(e,t))):[];var o,i},nearest:function t(n,e,o={point:null,distance:Number.MAX_VALUE}){if(e.x<n.boundary.x1-o.distance||e.x>n.boundary.x2+o.distance||e.y<n.boundary.y1-o.distance||e.y>n.boundary.y2+o.distance)return o;if(!n.topLeftChild)return n.points.forEach((t=>{const n=l(t,e);n<o.distance&&(o.point=t,o.distance=n)})),o;const i=[n.topLeftChild,n.topRightChild,n.bottomLeftChild,n.bottomRightChild],d=e.y<(n.boundary.y1+n.boundary.y2)/2,r=e.x<(n.boundary.x1+n.boundary.x2)/2;return o=t(i[2*(1-d)+1*(1-r)],e,o),o=t(i[2*(1-d)+1*r],e,o),o=t(i[2*d+1*(1-r)],e,o),o=t(i[2*d+1*r],e,o)},contains:a,distance:l,distanceToBoundary:function(t,n){return Math.max(n.x1-t.x,t.x-n.x2,n.y1-t.y,t.y-n.y2)}};var h=i.insert,s=i.distance,u=i.distanceToBoundary;const y=Math.min(window.innerWidth,750),p=d.range(300*y/600).map((()=>[Math.random()*y,300*Math.random()])),f={boundary:{x1:0,y1:0,x2:y,y2:300},points:[],depth:1};p.forEach((([t,n])=>{h(f,{x:t,y:n})}));const x=d.select("body").append("svg").attr("width",y).attr("height",300).on("click",(function(t){const[n,e]=d.pointer(t,d.selectAll("svg").node());x.selectAll("#pt").attr("cx",n).attr("cy",e),w()}));let b=x.selectAll(".node").data(R(f)).enter().append("rect").attr("class","node").attr("x",(function(t){return t.boundary.x1})).attr("y",(function(t){return t.boundary.y1})).attr("width",(function(t){return t.boundary.x2-t.boundary.x1})).attr("height",(function(t){return t.boundary.y2-t.boundary.y1})),C=x.selectAll(".point").data((g=f,R(g).flatMap((t=>t.points)))).enter().append("circle").attr("class","point").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("r",3);var g;let L=x.append("circle").attr("id","pt").attr("r",3).attr("cx",y/2).attr("cy",150).style("fill","yellow");const m=d.scaleLinear().domain([0,8]).range(["#efe","#060"]);function R(t){t.depth=0;const n=[];return v(t,(t=>{n.push(t)})),n}function v(t,n){n(t),t.topLeftChild&&(t.topLeftChild.depth=t.depth+1,v(t.topLeftChild,n),t.topRightChild.depth=t.depth+1,v(t.topRightChild,n),t.bottomLeftChild.depth=t.depth+1,v(t.bottomLeftChild,n),t.bottomRightChild.depth=t.depth+1,v(t.bottomRightChild,n))}function w(){L=d.selectAll("#pt");const t=+L.attr("cx"),n=+L.attr("cy");C.each((t=>{t.scanned=t.selected=!1})),b.each((t=>{t.visited=!1}));M(f,{x:t,y:n}).point.selected=!0,C.classed("scanned",(t=>t.scanned)),C.classed("selected",(t=>t.selected)),b.style("fill",(t=>t.visited?m(t.depth):"none"))}function M(t,n,e={point:null,distance:Number.MAX_VALUE}){if(t.visited=!0,u(n,t.boundary)>e.distance)return e;if(!t.topLeftChild)return t.points.forEach((t=>{t.scanned=!0;const o=s(n,t);o<e.distance&&(e.point=t,e.distance=o)})),e;const o=[t.topLeftChild,t.topRightChild,t.bottomLeftChild,t.bottomRightChild],i=n.y<(t.boundary.y1+t.boundary.y2)/2,d=n.x<(t.boundary.x1+t.boundary.x2)/2;return e=M(o[2*(1-i)+1*(1-d)],n,e),e=M(o[2*(1-i)+1*d],n,e),e=M(o[2*i+1*(1-d)],n,e),e=M(o[2*i+1*d],n,e)}w();
//# sourceMappingURL=4.56789939.js.map
