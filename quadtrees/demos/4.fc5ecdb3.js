var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},o=t.parcelRequirefde0;null==o&&((o=function(t){if(t in e)return e[t].exports;if(t in n){var o=n[t];delete n[t];var r={id:t,exports:{}};return e[t]=r,o.call(r.exports,r,r.exports),r.exports}var d=new Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(t,e){n[t]=e},t.parcelRequirefde0=o);var r=o("a9clF").range,d=o("d3250").scaleLinear,i=o("cNEHL"),a=i.select,l=i.pointer,c=i.selectAll,s=o("gqj1B"),p=s.insert,h=s.distance,u=s.distanceToBoundary;const f=Math.min(window.innerWidth,750),y=r(300*f/600).map((()=>[Math.random()*f,300*Math.random()])),b={boundary:{x1:0,y1:0,x2:f,y2:300},points:[],depth:1};y.forEach((([t,e])=>{p(b,{x:t,y:e})}));const x=a("body").append("svg").attr("width",f).attr("height",300).on("click",(function(t){const[e,n]=l(t,c("svg").node());x.selectAll("#pt").attr("cx",e).attr("cy",n),A()}));let g=x.selectAll(".node").data(w(b)).enter().append("rect").attr("class","node").attr("x",(function(t){return t.boundary.x1})).attr("y",(function(t){return t.boundary.y1})).attr("width",(function(t){return t.boundary.x2-t.boundary.x1})).attr("height",(function(t){return t.boundary.y2-t.boundary.y1})),C=x.selectAll(".point").data((m=b,w(m).flatMap((t=>t.points)))).enter().append("circle").attr("class","point").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("r",3);var m;let L=x.append("circle").attr("id","pt").attr("r",3).attr("cx",f/2).attr("cy",150).style("fill","yellow");const v=d().domain([0,8]).range(["#efe","#060"]);function w(t){t.depth=0;const e=[];return R(t,(t=>{e.push(t)})),e}function R(t,e){e(t),t.topLeftChild&&(t.topLeftChild.depth=t.depth+1,R(t.topLeftChild,e),t.topRightChild.depth=t.depth+1,R(t.topRightChild,e),t.bottomLeftChild.depth=t.depth+1,R(t.bottomLeftChild,e),t.bottomRightChild.depth=t.depth+1,R(t.bottomRightChild,e))}function A(){L=c("#pt");const t=+L.attr("cx"),e=+L.attr("cy");C.each((t=>{t.scanned=t.selected=!1})),g.each((t=>{t.visited=!1}));E(b,{x:t,y:e}).point.selected=!0,C.classed("scanned",(t=>t.scanned)),C.classed("selected",(t=>t.selected)),g.style("fill",(t=>t.visited?v(t.depth):"none"))}function E(t,e,n={point:null,distance:Number.MAX_VALUE}){if(t.visited=!0,u(e,t.boundary)>n.distance)return n;if(!t.topLeftChild)return t.points.forEach((t=>{t.scanned=!0;const o=h(e,t);o<n.distance&&(n.point=t,n.distance=o)})),n;const o=[t.topLeftChild,t.topRightChild,t.bottomLeftChild,t.bottomRightChild],r=e.y<(t.boundary.y1+t.boundary.y2)/2,d=e.x<(t.boundary.x1+t.boundary.x2)/2;return n=E(o[2*(1-r)+1*(1-d)],e,n),n=E(o[2*(1-r)+1*d],e,n),n=E(o[2*r+1*(1-d)],e,n),n=E(o[2*r+1*d],e,n)}A();
//# sourceMappingURL=4.fc5ecdb3.js.map
