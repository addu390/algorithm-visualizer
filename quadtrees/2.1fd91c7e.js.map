{"mappings":"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","sources":["demos/2.js"],"sourcesContent":["const d3 = require('d3');\n\nconst width = 750;\nconst height = 300;\n\nconst data = d3.range(300).map(function () {\n  return [Math.random() * width, Math.random() * height];\n});\n\nconst svg = d3\n  .select('body')\n  .append('svg')\n  .attr('width', width)\n  .attr('height', height)\n  .on('click', function (e) {\n    const [x, y] = d3.pointer(e, d3.selectAll('svg').node());\n    ptr.attr('cx', x).attr('cy', y);\n    draw();\n  });\n\nconst midX = width / 2;\nconst midY = height / 2;\n\nconst sections = svg\n  .selectAll('.node')\n  .data([\n    { x1: 0, x2: midX, y1: 0, y2: midY },\n    { x1: midX, x2: width, y1: 0, y2: midY },\n    { x1: 0, x2: midX, y1: midY, y2: height },\n    { x1: midX, x2: width, y1: midY, y2: height },\n  ])\n  .enter()\n  .append('rect')\n  .attr('class', 'node')\n  .attr('x', function (d) {\n    return d.x1;\n  })\n  .attr('y', function (d) {\n    return d.y1;\n  })\n  .attr('width', function (d) {\n    return d.x2 - d.x1;\n  })\n  .attr('height', function (d) {\n    return d.y2 - d.y1;\n  });\n\nconst s = 100;\n\nlet rect = svg\n  .selectAll('.rect')\n  .data([{}])\n  .enter()\n  .append('rect')\n  .attr('class', 'rect')\n  .attr('width', s)\n  .attr('height', s);\n\nconst points = svg\n  .selectAll('.point')\n  .data(data)\n  .enter()\n  .append('circle')\n  .attr('class', 'point')\n  .attr('cx', function (d) {\n    return d[0];\n  })\n  .attr('cy', function (d) {\n    return d[1];\n  })\n  .attr('r', 3);\n\nlet ptr = svg\n  .append('circle')\n  .attr('id', 'pt')\n  .attr('r', 3)\n  .attr('cx', width / 2)\n  .attr('cy', height / 2)\n  .style('fill', 'yellow');\n\nfunction contains(p, b) {\n  const [x, y] = p;\n  const { x1, x2, y1, y2 } = b;\n  return x >= x1 && x <= x2 && y >= y1 && y <= y2;\n}\n\nfunction intersects(b1, b2) {\n  return (\n    b1.x1 <= b2.x2 && // not too right\n    b1.x2 >= b2.x1 && // not too left\n    b1.y1 <= b2.y2 && // not too down\n    b1.y2 >= b2.y1 // not too up\n  );\n}\n\nfunction draw() {\n  const ptrx = +ptr.attr('cx');\n  const ptry = +ptr.attr('cy');\n\n  rect.attr('x', ptrx - s / 2).attr('y', ptry - s / 2);\n\n  const rx = +rect.attr('x');\n  const ry = +rect.attr('y');\n  const rw = +rect.attr('width');\n  const rh = +rect.attr('height');\n\n  points.each((p) => {\n    const [x, y] = p;\n    p.selected = x >= rx && x <= rx + rw && y >= ry && y <= ry + rh;\n  });\n\n  points.classed('selected', (p) => p.selected);\n\n  const ints = [];\n  sections.each((section) => {\n    if (intersects(section, { x1: rx, x2: rx + s, y1: ry, y2: ry + s })) {\n      ints.push(section);\n    }\n  });\n\n  points.each((point) => {\n    point.scanned = false;\n    ints.forEach((int) => {\n      if (contains(point, int)) {\n        point.scanned = true;\n      }\n    });\n  });\n\n  points.classed('scanned', (p) => {\n    return p.scanned;\n  });\n}\n\ndraw();\n"],"names":["$a5d3fe96fbb02815$var$data","$EQ8Ao","range","map","Math","random","$a5d3fe96fbb02815$var$svg","select","append","attr","on","e","x","y","pointer","selectAll","node","$a5d3fe96fbb02815$var$ptr","$a5d3fe96fbb02815$var$draw","$a5d3fe96fbb02815$var$sections","data","x1","x2","$a5d3fe96fbb02815$var$width","y1","y2","$a5d3fe96fbb02815$var$height","enter","d","$a5d3fe96fbb02815$var$rect","$a5d3fe96fbb02815$var$points","style","ptrx","ptry","$a5d3fe96fbb02815$var$s","rx","ry","rw","rh","each","p","selected","classed","ints","section","b1","b2","push","point","scanned","forEach","int","b","$a5d3fe96fbb02815$var$contains"],"version":3,"file":"2.1fd91c7e.js.map"}